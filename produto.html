<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Produto - Sombra Streetwear</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="style.css">
  <script src="https://code.iconify.design/3/3.1.0/iconify.min.js"></script>
</head>

<body>
  <!-- NAVBAR -->
  <nav class="navbar navbar-expand-lg fixed-top bg-black shadow-sm">
    <div class="container-fluid justify-content-between px-4">
      <div class="d-flex align-items-center gap-3">
        <a href="#" id="menu-toggle">
          <span class="iconify text-white fs-3" data-icon="mdi:menu"></span>
        </a>
        <div class="search-container d-none d-md-block">
          <form id="search-form" class="d-flex">
            <input type="text" id="search-input" class="form-control search-input" placeholder="Buscar produtos...">
            <button type="submit" class="search-button">
              <span class="iconify" data-icon="mdi:magnify"></span>
            </button>
          </form>
        </div>
        <button class="mobile-search-btn d-md-none" id="mobile-search-btn">
          <span class="iconify" data-icon="mdi:magnify"></span>
        </button>
      </div>
      <a href="index.html" class="navbar-brand">
        <img src="assets/images/logo_preta.png" alt="Logo Sombra" height="40" class="logo-responsive">
      </a>
      <a href="#" id="cart-toggle">
        <span class="iconify text-white fs-3" data-icon="mdi:shopping"></span>
      </a>
    </div>
  </nav>

  <!-- Modal de Pesquisa Mobile -->
  <div class="search-modal" id="search-modal">
    <div class="search-modal-content">
      <button class="search-modal-close" id="search-modal-close">&times;</button>
      <h4 style="margin-bottom: 15px;">Buscar Produtos</h4>
      <form id="mobile-search-form">
        <input type="text" id="mobile-search-input" class="search-modal-input" placeholder="Digite o que você procura...">
        <button type="submit" class="search-modal-btn">Buscar</button>
      </form>
    </div>
  </div>

  <!-- Menu Dropdown Lateral -->
  <div class="menu-overlay" id="menu-overlay"></div>
  <div id="menu-dropdown">
    <div class="menu-header">
      <h4>Menu</h4>
      <button class="menu-close" id="menu-close">&times;</button>
    </div>
    <div class="menu-categories">
      <div class="menu-category">
        <div class="menu-category-title">
          Categoria
          <span class="iconify" data-icon="mdi:chevron-down"></span>
        </div>
        <ul class="menu-category-items">
          <li><a href="catalogo.html?categoria=camiseta" data-categoria="camiseta">Camiseta</a></li>
          <li><a href="catalogo.html?categoria=moletom" data-categoria="moletom">Moletom</a></li>
          <li><a href="catalogo.html?categoria=calca" data-categoria="calca">Calças</a></li>
          <li><a href="catalogo.html?categoria=bag" data-categoria="bag">Bags</a></li>
          <li><a href="catalogo.html?categoria=bone" data-categoria="bone">Bonés</a></li>
          <li><a href="catalogo.html?categoria=tenis" data-categoria="tenis">Tênis</a></li>
        </ul>
      </div>
      <div class="menu-category">
        <div class="menu-category-title">
          Marcas
          <span class="iconify" data-icon="mdi:chevron-down"></span>
        </div>
        <ul class="menu-category-items">
          <li><a href="catalogo.html?marca=kenner" data-marca="kenner">Kenner</a></li>
          <li><a href="catalogo.html?marca=norden" data-marca="norden">Norden</a></li>
          <li><a href="catalogo.html?marca=vans" data-marca="vans">Vans</a></li>
          <li><a href="catalogo.html?marca=volcom" data-marca="volcom">Volcom</a></li>
          <li><a href="catalogo.html?marca=blunt" data-marca="blunt">Blunt</a></li>
          <li><a href="catalogo.html?marca=chronic" data-marca="chronic">Chronic</a></li>
          <li><a href="catalogo.html?marca=tripside" data-marca="tripside">Tripside</a></li>
        </ul>
      </div>
      <div class="menu-category">
        <div class="menu-category-title">
          Coleção
          <span class="iconify" data-icon="mdi:chevron-down"></span>
        </div>
        <ul class="menu-category-items">
          <li><a href="catalogo.html?colecao=blunt-summer" data-colecao="blunt-summer">Blunt Summer</a></li>
          <li><a href="catalogo.html?colecao=seven-sins" data-colecao="seven-sins">Seven Sins</a></li>
          <li><a href="catalogo.html?colecao=chronic-setembro" data-colecao="chronic-setembro">Chronic Setembro</a></li>
          <li><a href="catalogo.html?colecao=vans-fall" data-colecao="vans-fall">Vans Fall</a></li>
        </ul>
      </div>
    </div>
  </div>

  <!-- Modal do Carrinho -->
  <div class="overlay" id="cart-overlay"></div>
  <div class="cart-modal" id="cart-modal">
    <div class="cart-modal-header">
      <h4>Minha Sacola</h4>
      <button class="cart-modal-close" id="cart-modal-close">&times;</button>
    </div>
    <div class="cart-modal-items" id="cart-modal-items">
    </div>
    <div class="cart-modal-footer">
      <div class="cart-modal-total">
        <span>Total:</span>
        <span id="cart-modal-total-value">R$ 0,00</span>
      </div>
      <div class="cart-modal-buttons">
        <button class="cart-modal-checkout" id="cart-modal-checkout">Finalizar Compra</button>
        <button class="cart-modal-continue" id="cart-modal-continue">Continuar Comprando</button>
      </div>
    </div>
  </div>

  <div class="container" style="margin-top: 85px;">
    <p id="breadcrumb" style="font-weight: 300; font-size: 20px; color: #555;">Carregando caminho...</p>
  </div>

  <div class="container-fluid mt-3 pt-3" id="detalhes-produto">
  <div class="row px-4 gy-4" style="padding-bottom: 3rem;">
    <!-- IMAGENS -->
    <div class="col-lg-6">

      <div class="d-flex justify-content-center justify-content-lg-end flex-column flex-md-row gap-3">
        <!-- Miniaturas (lado esquerdo em telas grandes) -->
        <div class="d-flex flex-md-column gap-2 order-md-0 order-1">
          <img src="assets/images/img1.jpg" class="img-miniatura" alt="Miniatura 1">
          <img src="assets/images/img1.jpg" class="img-miniatura" alt="Miniatura 2">
          <img src="assets/images/img1.jpg" class="img-miniatura" alt="Miniatura 3">
        </div>
        <div class="order-md-1 order-0">
          <img src="assets/placeholder.jpeg" class="img-fluid img-principal" id="imagem_principal" alt="Imagem Principal">
        </div>
      </div>

    </div>

    <!-- DESCRIÇÃO -->
    <div class="col-lg-6">
      <div class="mb-3">
        <h2 class="fw-semibold" style="font-size: 24px;" id="nome"></h2>
        <p class="text-muted" style="font-size: 16px;" id="id"></p>
        <p class="fw-normal" style="font-size: 32px;" id="preco"></p>
      </div>

      <div class="mb-4">
        <p class="fw-semibold mb-1" style="font-size: 12px;">Tamanhos</p>
        <div class="d-flex flex-wrap gap-2">
          <button class="tamanho-btn">P</button>
          <button class="tamanho-btn">M</button>
          <button class="tamanho-btn">G</button>
          <button class="tamanho-btn">XG</button>
          <button class="tamanho-btn">XXG</button>
        </div>
      </div>

      <div class="mb-4">
        <p class="fw-semibold mb-1" style="font-size: 12px;">Cores</p>
        <div class="d-flex flex-wrap gap-2">
          <div class="cor-opcao bg-danger" data-cor="vermelho"></div>
          <div class="cor-opcao bg-dark" data-cor="preto"></div>
          <div class="cor-opcao bg-primary" data-cor="azul"></div>
          <div class="cor-opcao bg-success" data-cor="verde"></div>
        </div>
      </div>

      <div class="d-flex align-items-center mb-4 gap-3 flex-wrap">
        <input type="number" class="quantidade-input" value="1" min="1">
        <button class="btn-adicionar">Adicionar à Sacola</button>
      </div>

      <div>
        <h4 class="fw-semibold" style="font-size: 20px;">Descrição</h4>
        <p class="text-muted" style="font-size: 16px;" id="descricao"></p>
      </div>

      <div>
        <h4 class="fw-semibold" style="font-size: 20px;">Detalhes</h4>
        <ul class="text-muted" style="font-size: 16px;" id="detalhes"></ul>
      </div>
    </div>
  </div>
</div>

  <section class="carrossel-container">
    <h2 class="categoria">Veja Também</h2>

    <div class="cards-wrapper" id="produtos-relacionados">
    </div>
  </section>

  <!-- Footer -->
  <footer class="footer-container">
    <div class="footer">
      <div class="footer-section">
        <img src="assets/images/logo_preta.png" alt="Logo Sombra" style="height: 45px;">
      </div>

      <div class="footer-section">
        <h2>Institucional</h2>
        <ul>
          <li><a href="#">FAQ</a></li>
          <li><a href="#">Como comprar</a></li>
          <li><a href="#">Envio</a></li>
          <li><a href="#">Segurança</a></li>
          <li><a href="#">Pagamento</a></li>
          <li><a href="#">Fale conosco</a></li>
          <li><a href="sobre.html">Sobre Nós</a></li>
        </ul>
      </div>

      <div class="footer-section">
        <h2>Contato</h2>
        <ul>
          <li><a href="#"><i class="fa fa-whatsapp"></i> (99) 9 9999-9999</a></li>
          <li><a href="#"><i class="fa fa-instagram"></i> @sombraroupas</a></li>
        </ul>
      </div>

      <div class="footer-section">
        <h2>Pagamento</h2>
        <ul>
          <li><a href="#"><i class="fa fa-whatsapp"></i> Pagamento Combinado Via WhatsApp</a></li>
        </ul>
      </div>
    </div>

    <div class="footer-bottom">
      <hr />
      <p>&copy; 2025 Todos os direitos reservados. Criado por <a href="#" target="_blank" rel="noopener noreferrer">Romulus</a></p>
    </div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="script.js"></script>
  <script src="produto.js"></script>
  <script src="breadcrumb.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const cartToggle = document.getElementById("cart-toggle");
      const cartModal = document.getElementById("cart-modal");
      const cartOverlay = document.getElementById("cart-overlay");
      const cartModalClose = document.getElementById("cart-modal-close");
      const cartModalContinue = document.getElementById("cart-modal-continue");
      const cartModalCheckout = document.getElementById("cart-modal-checkout");
      const cartModalItems = document.getElementById("cart-modal-items");
      const cartModalTotalValue = document.getElementById("cart-modal-total-value");

      if (!cartToggle || !cartModal || !cartOverlay) {
        console.error("Elementos do carrinho não encontrados");
        return;
      }

      console.log("Inicializando carrinho modal...");

      cartToggle.addEventListener("click", (e) => {
        e.preventDefault();
        console.log("Botão do carrinho clicado");
        openCartModal();
      });

      if (cartModalClose) {
        cartModalClose.addEventListener("click", closeCartModal);
      }

      cartOverlay.addEventListener("click", closeCartModal);

      if (cartModalContinue) {
        cartModalContinue.addEventListener("click", closeCartModal);
      }

      if (cartModalCheckout) {
        cartModalCheckout.addEventListener("click", () => {
          window.location.href = "carrinho.html";
        });
      }

      function openCartModal() {
        console.log("Abrindo modal do carrinho");
        updateCartModal();
        cartModal.classList.add("active");
        cartOverlay.classList.add("active");
        document.body.style.overflow = "hidden"; // Impedir rolagem da página
      }

      function closeCartModal() {
        console.log("Fechando modal do carrinho");
        cartModal.classList.remove("active");
        cartOverlay.classList.remove("active");
        document.body.style.overflow = ""; 
      }

      function updateCartModal() {
        if (!cartModalItems || !cartModalTotalValue) {
          console.error("Elementos do modal não encontrados");
          return;
        }

        const carrinho = JSON.parse(localStorage.getItem("carrinho")) || [];
        console.log("Carrinho:", carrinho);

        cartModalItems.innerHTML = "";

        if (carrinho.length === 0) {
          cartModalItems.innerHTML = '<p class="text-center">Sua sacola está vazia.</p>';
          cartModalTotalValue.textContent = "R$ 0,00";
          return;
        }

        let subtotal = 0;

        carrinho.forEach((item, index) => {
          const precoTexto = item.preco.replace("R$ ", "").replace(".", "").replace(",", ".");
          const preco = Number.parseFloat(precoTexto);
          const total = preco * item.quantidade;
          subtotal += total;

          const itemElement = document.createElement("div");
          itemElement.className = "cart-modal-item";
          itemElement.innerHTML = `
            <img src="${item.imagem_principal}" alt="${item.nome}">
            <div class="cart-modal-item-info">
              <h5 class="cart-modal-item-name">${item.nome}</h5>
              <p class="cart-modal-item-price">R$ ${item.preco} ${item.tamanho ? `• Tam: ${item.tamanho}` : ""} ${item.cor ? `• Cor: ${item.cor}` : ""
            }</p>
              <div class="cart-modal-item-quantity">
                <button class="decrease-quantity" data-index="${index}">-</button>
                <span>${item.quantidade}</span>
                <button class="increase-quantity" data-index="${index}">+</button>
                <button class="cart-modal-item-remove" data-index="${index}">
                  <span class="iconify" data-icon="mdi:trash-can-outline"></span>
                </button>
              </div>
            </div>
          `;

          cartModalItems.appendChild(itemElement);
        });

        cartModalTotalValue.textContent = `R$ ${subtotal.toFixed(2).replace(".", ",")}`;

        document.querySelectorAll(".decrease-quantity").forEach((btn) => {
          btn.addEventListener("click", function () {
            const index = this.getAttribute("data-index");
            decreaseQuantity(index);
          });
        });

        document.querySelectorAll(".increase-quantity").forEach((btn) => {
          btn.addEventListener("click", function () {
            const index = this.getAttribute("data-index");
            increaseQuantity(index);
          });
        });

        document.querySelectorAll(".cart-modal-item-remove").forEach((btn) => {
          btn.addEventListener("click", function () {
            const index = this.getAttribute("data-index");
            removeFromCart(index);
          });
        });
      }

      function decreaseQuantity(index) {
        const carrinho = JSON.parse(localStorage.getItem("carrinho")) || [];
        if (carrinho[index].quantidade > 1) {
          carrinho[index].quantidade--;
          localStorage.setItem("carrinho", JSON.stringify(carrinho));
          updateCartModal();
        }
      }

      function increaseQuantity(index) {
        const carrinho = JSON.parse(localStorage.getItem("carrinho")) || [];
        carrinho[index].quantidade++;
        localStorage.setItem("carrinho", JSON.stringify(carrinho));
        updateCartModal();
      }

      function removeFromCart(index) {
        const carrinho = JSON.parse(localStorage.getItem("carrinho")) || [];
        carrinho.splice(index, 1);
        localStorage.setItem("carrinho", JSON.stringify(carrinho));
        updateCartModal();
      }

      window.cartFunctions = {
        openCartModal,
        closeCartModal,
        updateCartModal
      };
    });
  </script>
</body>

</html>